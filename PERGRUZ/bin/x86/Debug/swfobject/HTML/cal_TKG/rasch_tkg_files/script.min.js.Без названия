!function(a){function t(t,e){l||(l=SVG(a("#goods .boxes-svg-container").get(0))),l.clear(),l.image("./content/axleload/boxes_"+i+".png").loaded(function(a){l.viewbox(0,0,a.width,a.height+70)})}function e(){for(;l.children().length>1;)l.first().remove();var a=n.arrows[i];a.forEach(function(a,t){l.group().add(l.rect(16,25).fill(n.arrowColor).move(8,0)).add(l.polyline("0,0 32,0 16,20 0,0").fill(n.arrowColor).move(0,23)).add(l.plain(r[t]).font({size:18,anchor:"middle"}).move(16,50)).move(a.x,a.y).back()})}var n={},l=null,i="2_3",r=[];a(document).ready(function(){a('input[name="truck-axles"], input[name="trailer-axles"]').change(function(){var e=a('input[name="truck-axles"]:checked').val(),n=a('input[name="trailer-axles"]:checked').val();i=e+"_"+n,a("img.truck").hide(),a("#imgTruck"+e).show(),a(".Nt-label").hide(),a("#NtLabel"+e).show().find(":radio").prop("checked",a(".Nt-label :radio:checked").length>0),a(".l2-label").hide(),a("#l2Label"+e).show().find(":radio").prop("checked",a(".l2-label :radio:checked").length>0),a("img.trailer").hide(),a("#imgTrailer"+n).show(),t(),a(".calc-result").hide()}),a('input[type="number"]').on("change input",function(){if("Mt"==this.id){var t=a(":radio[name=Nt]:checked").val();2==t?a("#Nt_data").val(parseInt(.3*a(this).val())):a("#Nt_data").val(parseInt(.7*a(this).val()))}else"Mp"==this.id&&a("#Ntp").val(parseInt(.2*a(this).val()))}).each(function(){a(this).val(n[this.id+"_default"]),a(this).attr("min",n[this.id+"_min"]),a(this).attr("max",n[this.id+"_max"])}),a('input[name="L"]').change(function(){2==a(this).val()?a("#L_data").val(n.L_data_default):a("#L_data").val(n.Lt_default-n.L_data_default)}),a('input[name="Nt"]').change(function(){2==a(this).val()?a("#Nt_data").val(.3*n.Mt_default):a("#Nt_data").val(.7*n.Mt_default)}),a(".btn-set-defaults").click(function(){var t=a(this).closest(".tab-pane");t.find('input[name="L"]:first').prop("checked",!0),t.find('input[name="Nt"]:first').prop("checked",!0),t.find('input[name="truck-axles"]:nth(0)').prop("checked",!0).change(),t.find('input[name="trailer-axles"]:nth(2)').prop("checked",!0).change(),t.find('input[type="number"]').each(function(){a(this).val(n[this.id+"_default"])})}),a("#go").click(function(){function t(t,e){e=Math.round(e),r.push(e),a(".calc-result").append(a("#n-template").html().replace(/__NUM__/g,t.toString())),a("#N"+t).text(e)}var n=a("#Mt").val()?parseInt(a("#Mt").val()):0,l=a("#Lt").val()?parseInt(a("#Lt").val()):0,i=a(":radio[name=L]:checked").val(),d=a("#L_data").val()?parseInt(a("#L_data").val()):0,_=a(":radio[name=Nt]:checked").val(),c=a("#Nt_data").val()?parseInt(a("#Nt_data").val()):0,o=a("#Mp").val()?parseInt(a("#Mp").val()):0,u=a("#LA").val()?parseInt(a("#LA").val()):0,s=a("#LC").val()?parseInt(a("#LC").val()):0,v=a("#LB").val()?parseInt(a("#LB").val()):0,p=a("#Ntp").val()?parseInt(a("#Ntp").val()):0,h=a("#Mg1").val()?parseInt(a("#Mg1").val()):0,m=a("#Mg2").val()?parseInt(a("#Mg2").val()):0,f=a("#Mg3").val()?parseInt(a("#Mg3").val()):0,x=a("#Mg4").val()?parseInt(a("#Mg4").val()):0;if(0>=n||0>=l||0>=d||0>=o||0>=u||0>=s||0>=v)return void alert("Указаны не все параметры!");if(c>0)if(2==_)var M=c,g=M*l/n;else var L=c,g=(n-L)*l/n;else var M=.3*n,g=M*l/n;if(2==i)var y=d,N=l-y;else var N=d,y=l-N;0==p&&(p=.2*o);var k=p*v/o,I=u/4,b=3*I+I/2-s,w=2*I+I/2-s,C=I+I/2-s,A=I/2-s,B=h+m+f+x,D=B>0?(h*b+m*w+f*C+x*A)/B:0,S=B+n+o,T=(B*D+o*k)/v,j=(n*g+T*N)/l,z=n+T-j,E=B+o-T;a("#M1").text(Math.round(n)),a("#M2").text(Math.round(o)),a("#M3").text(Math.round(B)),a("#M4").text(Math.round(S)),a(".n-item").remove(),r=[],t(1,z);for(var G=2,Q=a('input[name="truck-axles"]:checked').val()-1,U=0;Q>U;U++)t(G,j/Q),G++;for(Q=a('input[name="trailer-axles"]:checked').val(),U=0;Q>U;U++)t(G+U,E/Q);a(".calc-result").show(),e()}),t()}),n.N1_min=0,n.N1_default=0,n.N2_min=0,n.N2_default=0,n.N3_min=1e3,n.N3_default=0,n.Map_min=300,n.Mt_min=0,n.Mt_default=8180,n.Mt_max=1e5,n.Lt_min=0,n.Lt_default=3600,n.Lt_max=1e5,n.L_data_min=0,n.L_data_default=540,n.L_data_max=1e5,n.Nt_data_min=0,n.Nt_data_default=2454,n.Nt_data_max=1e5,n.Mp_min=0,n.Mp_default=6400,n.Mp_max=1e5,n.LA_min=0,n.LA_default=13620,n.LA_max=1e5,n.LC_min=0,n.LC_default=4260,n.LC_max=1e5,n.LB_min=0,n.LB_default=7700,n.LB_max=1e5,n.Ntp_min=0,n.Ntp_default=1280,n.Ntp_max=1e5,n.Mg1_min=0,n.Mg1_default=1,n.Mg1_max=1e5,n.Mg2_min=0,n.Mg2_default=1,n.Mg2_max=1e5,n.Mg3_min=0,n.Mg3_default=1,n.Mg3_max=1e5,n.Mg4_min=0,n.Mg4_default=1,n.Mg4_max=1e5,n.arrowColor="#6CDD31",n.arrows={"2_1":[{x:53,y:186},{x:219,y:186},{x:529,y:186}],"2_2":[{x:53,y:186},{x:219,y:186},{x:500,y:186},{x:559,y:186}],"2_3":[{x:53,y:186},{x:219,y:186},{x:470,y:186},{x:529,y:186},{x:588,y:186}],"3_1":[{x:55,y:186},{x:196,y:186},{x:258,y:186},{x:554,y:186}],"3_2":[{x:55,y:186},{x:196,y:186},{x:258,y:186},{x:525,y:186},{x:584,y:186}],"3_3":[{x:55,y:186},{x:196,y:186},{x:258,y:186},{x:495,y:186},{x:554,y:186},{x:613,y:186}]}}(jQuery);